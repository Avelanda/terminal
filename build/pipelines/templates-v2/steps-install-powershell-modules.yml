parameters:
  - name: modules
    type: object
    default: []

steps:
  - pwsh: |-
      Register-PSResourceRepository -Name TerminalDependencies -Uri https://pkgs.dev.azure.com/shine-oss/terminal/_packaging/TerminalDependencies/nuget/v2 -Trusted -ErrorAction:Ignore
      Install-PSResource -Repository TerminalDependencies -Name ${{ join(',',parameters.modules) }}
    displayName: Install Modules for PowerShell 7+

  - powershell: |-
      Register-PSResourceRepository -Name TerminalDependencies -Uri https://pkgs.dev.azure.com/shine-oss/terminal/_packaging/TerminalDependencies/nuget/v2 -Trusted -ErrorAction:Ignore
      Install-PSResource -Repository TerminalDependencies -Name ${{ join(',',parameters.modules) }}
    displayName: Install Modules for PowerShell 5.1
